// ==============================================
// üì¶ PRODUCT DETAIL STYLES (Green Theme)
// ==============================================

@import '../../../../styles/variables';
@import '../../../../styles/mixins';

.product-detail-container {
   min-height: 100vh;
   padding: spacing(8) spacing(6);
   background: linear-gradient(135deg, #f0fdf4 0%, color(white) 50%, #ecfdf5 100%);

   @include mobile-only {
      padding: spacing(6) spacing(4);
   }

   // ==============================================
   // üìã HEADER & TITLE
   // ==============================================
   h1 {
      font-size: font-size(3xl);
      font-weight: font-weight(bold);
      color: #14532d;
      margin: 0 0 spacing(10) 0;
      text-align: center;
      position: relative;

      &::before {
         margin-right: spacing(2);
         font-size: font-size(2xl);
      }

      &::after {
         content: '';
         position: absolute;
         bottom: -8px;
         left: 50%;
         transform: translateX(-50%);
         width: 180px;
         height: 4px;
         background: linear-gradient(90deg, #22c55e, #16a34a);
         border-radius: border-radius(full);
      }

      @include mobile-only {
         font-size: font-size(2xl);
      }
   }

   // ==============================================
   // üìä LOADING STATE
   // ==============================================
   .loading-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 400px;
      text-align: center;

      .loading-spinner {
         width: 60px;
         height: 60px;
         border: 4px solid #d1fae5;
         border-top: 4px solid #22c55e;
         border-radius: 50%;
         animation: spin 1s linear infinite;
         margin-bottom: spacing(4);
      }

      p {
         color: #16a34a;
         font-size: font-size(lg);
         font-weight: font-weight(medium);
         margin: 0;
      }
   }

   // ==============================================
   // ‚ùå ERROR STATE
   // ==============================================
   .error-state {
      max-width: 600px;
      margin: 0 auto;
      background: color(white);
      padding: spacing(8);
      border-radius: border-radius(xl);
      box-shadow: shadow(lg);
      border: 2px solid #fecaca;
      text-align: center;

      .error-icon {
         font-size: font-size(4xl);
         margin-bottom: spacing(4);
      }

      h2 {
         color: #dc2626;
         font-size: font-size(xl);
         font-weight: font-weight(bold);
         margin: 0 0 spacing(3) 0;
      }

      p {
         color: #374151;
         font-size: font-size(base);
         margin: 0 0 spacing(6) 0;
         line-height: line-height(relaxed);
      }

      button {
         @include button-base;
         background: linear-gradient(135deg, #ef4444, #dc2626);
         color: color(white);
         border: 1px solid #dc2626;
         padding: spacing(3) spacing(6);
         font-size: font-size(sm);
         font-weight: font-weight(semibold);
         border-radius: border-radius(lg);
         transition: all 0.3s ease;

         &:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.3);
         }
      }
   }

   // ==============================================
   // üìã PRODUCT DETAIL CARD
   // ==============================================
   .product-detail-card {
      max-width: 1600px;
      margin: 0 auto;
      background: color(white);
      border-radius: border-radius(xl);
      box-shadow: shadow(lg);
      border: 1px solid #bbf7d0;
      overflow: hidden;

      @include mobile-only {
         margin: 0 spacing(2);
      }

      .card-header {
         background: linear-gradient(135deg, #dcfce7, #bbf7d0);
         padding: spacing(6);
         text-align: center;
         border-bottom: 2px solid #22c55e;

         h2 {
            color: #14532d;
            font-size: font-size(4xl);
            font-weight: font-weight(bold);
            margin: 0 0 spacing(2) 0;
         }

         .product-id {
            color: #16a34a;
            font-size: font-size(xl);
            font-weight: font-weight(medium);
            background: color(white);
            padding: spacing(1) spacing(3);
            border-radius: border-radius(full);
            display: inline-block;
         }
      }

      .card-body {
         padding: spacing(8);

         @include mobile-only {
            padding: spacing(6) spacing(4);
         }

         .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: spacing(6);
            justify-content: center;

            &:has(.detail-section:nth-child(7):last-child) {
               grid-template-columns: repeat(3, 1fr);

               .detail-section:nth-child(7) {
                  grid-column: 2; // Item th·ª© 7 n·∫±m ·ªü c·ªôt gi·ªØa
                  max-width: 400px;
                  justify-self: center;
               }
            }

            @include mobile-only {
               grid-template-columns: 1fr;
               gap: spacing(4);
            }
         }

         .detail-section {
            background: #f9fafb;
            border-radius: border-radius(lg);
            padding: spacing(6);
            border: 1px solid #e5e7eb;

            @include mobile-only {
               padding: spacing(4);
            }

            h3 {
               color: #14532d;
               font-size: font-size(2xl);
               font-weight: font-weight(bold);
               margin: 0 0 spacing(16) 0;
               display: flex;
               align-items: center;

               &::before {
                  margin-right: spacing(2);
                  font-size: font-size(xl);
               }
            }

            .detail-item {
               display: flex;
               justify-content: center;
               align-items: center;
               margin-bottom: spacing(3);
               padding-bottom: spacing(3);
               border-bottom: 1px solid #e5e7eb;

               &:last-child {
                  margin-bottom: 0;
                  padding-bottom: 0;
                  border-bottom: none;
               }

               .label {
                  font-weight: font-weight(semibold);
                  color: #374151;
                  min-width: 120px;
                  font-size: font-size(sm);
                  flex-shrink: 0;
               }

               .value {
                  color: #1f2937;
                  font-size: font-size(xl);
                  text-align: right;
                  flex: 1;
                  word-break: break-word;
                  overflow-wrap: break-word;

                  // Description link styling
                  .description-link {
                     color: #bc98ff;
                     font-weight: font-weight(bold);
                     cursor: pointer;
                     text-decoration: none;
                     text-decoration-style: dashed;
                     transition: all 0.2s ease;
                     padding: spacing(1) spacing(2);
                     border-radius: 4px;
                     display: inline-block;

                     &:hover {
                        background-color: #bc98ff;
                        color: #374151;
                        text-decoration-color: #1d4ed8;
                        transform: translateY(-1px);
                     }

                     &:active {
                        transform: translateY(0);
                     }
                  }

                  &.price {
                     font-weight: font-weight(bold);
                     color: #16a34a;
                  }

                  &.discount-price {
                     font-weight: font-weight(bold);
                     color: #f97316;
                  }

                  &.stock {
                     font-weight: font-weight(bold);
                     color: #3b82f6;
                  }

                  .badge {
                     padding: spacing(1) spacing(2);
                     border-radius: border-radius(full);
                     font-size: font-size(xs);
                     font-weight: font-weight(bold);
                     text-transform: uppercase;
                     letter-spacing: 0.05em;

                     &.active {
                        background: #dcfce7;
                        color: #15803d;
                     }

                     &.inactive {
                        background: #fee2e2;
                        color: #dc2626;
                     }

                     &.new {
                        background: #dbeafe;
                        color: #1d4ed8;
                     }

                     &.bestseller {
                        background: #fed7aa;
                        color: #c2410c;
                     }

                  }
               }

               @include mobile-only {
                  flex-direction: column;
                  align-items: stretch;

                  .label {
                     min-width: auto;
                     margin-bottom: spacing(1);
                  }

                  .value {
                     text-align: left;
                     margin-left: 0;
                  }
               }
            }
         }
      }

      .card-footer {
         background: #f9fafb;
         padding: spacing(6);
         border-top: 1px solid #e5e7eb;

         .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: spacing(3);
            justify-content: center;

            @media (max-width: 768px) {
               grid-template-columns: 1fr;
               gap: spacing(2);
            }

            .btn-action {
               border: none;
               padding: spacing(3) spacing(4);
               border-radius: border-radius(lg);
               font-weight: font-weight(semibold);
               cursor: pointer;
               transition: all 0.3s ease;
               box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
               font-size: font-size(sm);
               text-align: center;
               min-height: 48px;
               display: flex;
               align-items: center;
               justify-content: center;

               &:hover:not(:disabled) {
                  transform: translateY(-2px);
                  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
               }

               &:active:not(:disabled) {
                  transform: translateY(-1px);
                  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
               }

               &:disabled {
                  opacity: 0.6;
                  cursor: not-allowed;
                  transform: none !important;
                  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
               }

               // Activate button (Show Category)
               &.btn-activate {
                  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                  color: white;
                  border: 1px solid #7c3aed;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #7c3aed, #6d28d9);
                     border-color: #6d28d9;
                     box-shadow: 0 8px 24px rgba(124, 56, 237, 0.6);
                  }

               }

               // Deactivate button (Hide Category)
               &.btn-deactivate {
                  background: linear-gradient(135deg, #f59e0b, #d97706);
                  color: white;
                  border: 1px solid #d97706;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #d97706, #b45309);
                     border-color: #b45309;
                     box-shadow: 0 8px 24px rgba(217, 119, 6, 0.6);
                  }
               }

               // Manage Products button
               &.btn-add-category {
                  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
                  color: white;
                  border: 1px solid #2563eb;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #2563eb, #1e40af);
                     border-color: #1d4ed8;
                     box-shadow: 0 8px 24px rgba(21, 99, 235, 0.6);
                  }
               }

               // Delete button
               &.btn-delete {
                  background: linear-gradient(135deg, #ef4444, #dc2626);
                  color: white;
                  border: 1px solid #dc2626;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #dc2626, #b91c1c);
                     border-color: #b91c1c;
                     box-shadow: 0 8px 24px rgba(220, 38, 38, 0.6);
                  }
               }

               // Update button
               &.btn-update {
                  background: linear-gradient(135deg, #10b981, #047857);
                  color: white;
                  border: 1px solid #059669;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #059669, #065f46);
                     border-color: #047857;
                     box-shadow: 0 8px 24px rgba(16, 185, 137, 0.6);
                  }
               }

               // Back button
               &.btn-back {
                  background: linear-gradient(135deg, #6b7280, #4b5563);
                  color: white;
                  border: 1px solid #4b5563;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #4b5563, #374151);
                     border-color: #374151;
                     box-shadow: 0 8px 24px rgba(98, 104, 112, 0.6);
                  }
               }
            }
         }

      }
   }

   // ==============================================
   // üé≠ ANIMATIONS
   // ==============================================
   .product-detail-card {
      animation: fade-in 0.6s ease-out;
   }

   .detail-section {
      animation: slide-up 0.5s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);

      &:nth-child(1) {
         animation-delay: 0.1s;
      }

      &:nth-child(2) {
         animation-delay: 0.2s;
      }

      &:nth-child(3) {
         animation-delay: 0.3s;
      }

      &:nth-child(4) {
         animation-delay: 0.4s;
      }
   }

   @keyframes fade-in {
      from {
         opacity: 0;
         transform: translateY(20px);
      }

      to {
         opacity: 1;
         transform: translateY(0);
      }
   }

   @keyframes slide-up {
      to {
         opacity: 1;
         transform: translateY(0);
      }
   }

   @keyframes spin {
      from {
         transform: rotate(0deg);
      }

      to {
         transform: rotate(360deg);
      }
   }

   // ==============================================
   // üåô DARK MODE SUPPORT
   // ==============================================
   @media (prefers-color-scheme: dark) {
      background: linear-gradient(135deg, #14532d 0%, color(gray-900) 50%, #166534 100%);

      h1 {
         color: #bbf7d0;
      }

      .loading-state {
         .loading-spinner {
            border-color: #374151;
            border-top-color: #22c55e;
         }

         p {
            color: #22c55e;
         }
      }

      .error-state {
         background: color(gray-800);
         border-color: #f87171;

         h2 {
            color: #f87171;
         }

         p {
            color: color(gray-300);
         }
      }

      .product-detail-card {
         background: color(gray-800);
         border-color: #22c55e;

         .card-header {
            background: linear-gradient(135deg, #166534, #14532d);
            border-bottom-color: #22c55e;

            h2 {
               color: #bbf7d0;
            }

            .product-id {
               background: color(gray-700);
               color: #22c55e;
            }
         }

         .card-body {
            .detail-section {
               background: color(gray-700);
               border-color: color(gray-600);

               h3 {
                  text-align: center !important;
                  justify-content: center !important;
                  color: #bbf7d0;
               }

               .detail-item {
                  border-bottom-color: color(gray-600);

                  .label {
                     color: color(gray-300);
                  }

                  .value {
                     color: color(gray-200);

                     &.price {
                        color: #22c55e;
                     }

                     &.discount-price {
                        color: #fb923c;
                     }

                     &.stock {
                        color: #60a5fa;
                     }

                     .badge {
                        &.active {
                           background: #14532d;
                           color: #bbf7d0;
                        }

                        &.inactive {
                           background: #7f1d1d;
                           color: #fca5a5;
                        }

                        &.new {
                           background: #1e3a8a;
                           color: #93c5fd;
                        }

                        &.bestseller {
                           background: #9a3412;
                           color: #fed7aa;
                        }
                     }

                     // ==============================================
                     // üìÇ CATEGORIES DISPLAY
                     // ==============================================
                     .categories-info {
                        width: 100%;

                        .badge.category-count {
                           background: #22c55e;
                           color: color(white);
                           font-weight: font-weight(semibold);
                           font-size: font-size(sm);
                           margin-bottom: spacing(3);
                           margin-left: 15px;
                           display: block;
                           width: fit-content;
                        }

                        .categories-list {
                           display: flex;
                           flex-wrap: wrap;
                           gap: spacing(2);
                           margin-top: spacing(2);

                           .badge.category-name {
                              background: #16a34a;
                              color: color(white);
                              font-size: font-size(xs);
                              padding: spacing(2) spacing(3);
                              border-radius: border-radius(full);
                              transition: all 0.3s ease;
                              font-weight: font-weight(medium);

                              &:hover {
                                 background: #15803d;
                                 transform: translateY(-1px);
                                 box-shadow: 0 2px 8px rgba(21, 128, 61, 0.3);
                              }

                              &.clickable {
                                 cursor: pointer;
                                 position: relative;

                                 &:hover {
                                    background: #0f6b2c;
                                    transform: translateY(-2px) scale(1.05);
                                    box-shadow: 0 4px 12px rgba(15, 107, 44, 0.4);
                                 }

                                 &:active {
                                    transform: translateY(-1px) scale(0.98);
                                 }

                                 // Th√™m hi·ªáu ·ª©ng ripple
                                 &::before {
                                    content: '';
                                    position: absolute;
                                    top: 50%;
                                    left: 50%;
                                    width: 0;
                                    height: 0;
                                    background: rgba(255, 255, 255, 0.3);
                                    border-radius: 50%;
                                    transform: translate(-50%, -50%);
                                    transition: all 0.3s ease;
                                    z-index: 0;
                                 }

                                 &:active::before {
                                    width: 100%;
                                    height: 100%;
                                 }
                              }
                           }
                        }
                     }
                  }
               }
            }
         }

         .card-footer {
            background: color(gray-700);
            border-top-color: color(gray-600);

            .btn-action {
               &.btn-activate {
                  background: linear-gradient(135deg, #7c3aed, #5b21b6);
                  border-color: #7c3aed;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #4c1d95, #7c3aed);
                  }
               }

               &.btn-deactivate {
                  background: linear-gradient(135deg, #4b5563, #374151);
                  border-color: #4b5563;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #1f2937, #374151);
                  }
               }

               &.btn-add-category {
                  background: linear-gradient(135deg, #ea580c, #c2410c);
                  border-color: #ea580c;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #9a3412, #c2410c);
                  }
               }

               &.btn-delete {
                  background: linear-gradient(135deg, #dc2626, #b91c1c);
                  border-color: #dc2626;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #991b1b, #b91c1c);
                  }
               }

               &.btn-update {
                  background: linear-gradient(135deg, #16a34a, #15803d);
                  border-color: #16a34a;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #14532d, #15803d);
                  }
               }

               &.btn-back {
                  background: linear-gradient(135deg, #2563eb, #1d4ed8);
                  border-color: #2563eb;

                  &:hover:not(:disabled) {
                     background: linear-gradient(135deg, #1e40af, #1d4ed8);
                  }
               }
            }
         }
      }
   }
}

.basic-info {
   padding: 0 !important;
}

// ==============================================
// üìã DESCRIPTION MODAL STYLES
// ==============================================
.description-modal {
   .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: spacing(4);
      animation: fadeIn 0.2s ease-out;
   }

   .modal-content {
      background: #1f2937;
      border-radius: 12px;
      padding: spacing(8);
      max-width: 600px;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      animation: slideIn 0.3s ease-out;

      .modal-header {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: spacing(6);
         padding-bottom: spacing(4);
         border-bottom: 1px solid #4b5563;

         h3 {
            font-size: font-size(xl);
            font-weight: font-weight(bold);
            color: #bbf7d0;
            margin: 0;
         }

         .close-btn {
            background: none;
            border: none;
            font-size: font-size(2xl);
            color: #6b7280;
            cursor: pointer;
            padding: spacing(2);
            border-radius: 6px;
            transition: all 0.2s ease;

            &:hover {
               background-color: #374151;
               color: #f3f4f6;
            }
         }
      }

      .modal-body {
         .description-content {
            white-space: pre-wrap;
            line-height: line-height(relaxed);
            color: #ffffff;
            font-size: font-size(base);
            padding: spacing(4);
            background-color: #374151;
            border-radius: 8px;
            border: 1px solid #4b5563;
            max-height: 400px;
            overflow-y: auto;
         }
      }
   }
}

@keyframes fadeIn {
   from {
      opacity: 0;
   }

   to {
      opacity: 1;
   }
}

@keyframes slideIn {
   from {
      opacity: 0;
      transform: translateY(-20px) scale(0.95);
   }

   to {
      opacity: 1;
      transform: translateY(0) scale(1);
   }
}

.unit {
   font-weight: bold;
   color: #d7f04a !important;
}